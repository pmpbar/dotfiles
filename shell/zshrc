export DOTFILES="$HOME/.dotfiles"
export TERM="screen-256color"

export PATH="/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin:$HOME/.bin:$HOME/.local/bin:$HOME/.cargo/bin"

if ! type "nvim" > /dev/null; then
  export EDITOR=vim
  export MANPAGER="sh -c \"col -b | vim --not-a-term -c 'set ft=man ts=8 nomod nolist nonu' \
    -c 'nnoremap i <nop>' \
    -c 'nnoremap <Space> <C-f>' \
    -c 'noremap q :quit<CR>' -\""
else
  export EDITOR=nvim
  export MANPAGER='nvim +Man!'
fi

# -- Plugins --
#
[[ ! -a $HOME/.antigen.zsh ]] && curl -L git.io/antigen > $HOME/.antigen.zsh
source $HOME/.antigen.zsh
antigen use oh-my-zsh

antigen bundle z
antigen bundle fzf
antigen bundle zsh-users/zsh-autosuggestions
antigen bundle zsh-users/zsh-syntax-highlighting
antigen bundle zsh-users/zsh-completions

antigen bundle sudo
antigen bundle docker
antigen bundle docker-compose
antigen bundle kubectl

antigen apply

# theme
source $DOTFILES/shell/zsh-prompt.zsh-theme

# source if exists
function sife() { [ -f $1 ] && source $1 }

sife $DOTFILES/shell/functions.zsh
sife $DOTFILES/shell/alias.zsh

bindkey '^E' autosuggest-accept
bindkey '^ ' forward-word

unalias z 2> /dev/null
z() {
  [ $# -gt 0 ] && _z "$*" && return
  cd "$(_z -l 2>&1 | fzf --height 40% --nth 2.. --reverse --inline-info +s --tac --query "${*##-* }" | sed 's/^[0-9,.]* *//')"
}


# Disable command auto-correction.
export ENABLE_CORRECTION=false
export DISABLE_AUTO_TITLE=true


autoload -U +X bashcompinit && bashcompinit
[ -f /usr/local/bin/mc ] && complete -o nospace -C /usr/local/bin/mc mc

# -- Sources --
sife $HOME/.zshrc.local

[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh
